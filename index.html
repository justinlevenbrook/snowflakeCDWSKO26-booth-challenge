<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snowflake Partner Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: #f0f4f8; color: #1a1a1a; -webkit-font-smoothing: antialiased; }
        .st-card { background: white; border-radius: 1rem; border: 1px solid #e6e9ef; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .st-btn { background: #ff4b4b; color: white; transition: all 0.2s ease; }
        .st-btn:active { transform: scale(0.98); }
        .st-btn:disabled { background: #cbd5e1; cursor: not-allowed; }
        .snowflake-blue { color: #29b5e8; }
        .hidden { display: none; }
        .correct { border-color: #28a745 !important; background: #e8f5e9; color: #155724; }
        .incorrect { border-color: #dc3545 !important; background: #fdf2f2; color: #721c24; }
        select, input { font-size: 16px !important; } 
    </style>
</head>
<body class="p-4 flex items-center justify-center min-h-screen">

    <!-- START SCREEN -->
    <div id="start-screen" class="w-full max-w-md st-card p-8 space-y-6 text-center">
        <div class="flex justify-center mb-2">
            <svg width="60" height="60" viewBox="0 0 24 24" fill="none" class="snowflake-blue">
                <path d="M12 2L12 22M2 12L22 12M19 19L5 5M19 5L5 19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
        </div>
        <h1 class="text-3xl font-extrabold text-slate-800">Partner Sales Challenge</h1>
        <p class="text-slate-600">Test your Data Cloud knowledge and enter our leadership raffle drawing.</p>
        <div class="bg-blue-50 p-4 rounded-lg text-sm text-blue-700 font-bold uppercase tracking-wider text-center">
            Prize: Snowflake LA28 zip up Jacket
        </div>
        <button onclick="startQuiz()" class="st-btn w-full py-4 rounded-xl font-bold text-lg shadow-lg">START CHALLENGE</button>
    </div>

    <!-- QUIZ SCREEN -->
    <div id="quiz-screen" class="w-full max-w-md st-card p-6 hidden space-y-6">
        <div class="flex justify-between items-center text-xs font-bold text-slate-400 uppercase">
            <span id="progress">QUESTION 1/5</span>
            <span class="snowflake-blue">Partner GTM</span>
        </div>
        
        <div id="question-area" class="space-y-4">
            <h2 id="question-text" class="text-xl font-bold text-slate-800 leading-tight"></h2>
            <div id="options" class="grid grid-cols-1 gap-3"></div>
        </div>

        <button id="next-btn" onclick="nextQuestion()" class="hidden w-full py-4 bg-slate-800 text-white rounded-xl font-bold shadow-md">NEXT QUESTION</button>
    </div>

    <!-- LEAD CAPTURE -->
    <div id="lead-screen" class="w-full max-w-md st-card p-8 hidden space-y-6">
        <h2 class="text-2xl font-bold text-center">Challenge Complete!</h2>
        <p class="text-center text-slate-600 text-sm">You scored <span id="final-score" class="font-bold text-slate-900"></span>/5. Join the raffle and request a session below.</p>
        
        <form id="lead-form" class="space-y-4">
            <div class="space-y-2">
                <input type="text" id="name" placeholder="Full Name" required class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none bg-slate-50">
                <input type="email" id="email" placeholder="Work Email" required class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none bg-slate-50">
            </div>

            <div class="pt-2">
                <label class="text-[10px] font-bold text-slate-400 uppercase ml-1">Optional Coverage/Vertical</label>
                <select id="vertical" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none bg-white text-sm mt-1">
                    <option value="">Select Covered Vertical/Territory...</option>
                    <option value="Federal">Federal</option>
                    <option value="State and Local">State and Local</option>
                    <option value="K12 EDU">K12 EDU</option>
                    <option value="Hi-Ed">Hi-Ed</option>
                    <option value="Small Business">Small Business</option>
                    <option value="Commercial Territory East">Commercial Territory East</option>
                    <option value="Commercial Territory West">Commercial Territory West</option>
                    <option value="Commercial Majors East">Commercial Majors East</option>
                    <option value="Commercial Majors Central">Commercial Majors Central</option>
                    <option value="Commercial Majors West">Commercial Majors West</option>
                    <option value="Strategic Enterprise Northeast">Strategic Enterprise Northeast</option>
                    <option value="Strategic Enterprise Southeast">Strategic Enterprise Southeast</option>
                    <option value="Strategic Enterprise SouthCentral">Strategic Enterprise SouthCentral</option>
                    <option value="Strategic Enterprise Central">Strategic Enterprise Central</option>
                    <option value="Strategic Enterprise Mid-Central">Strategic Enterprise Mid-Central</option>
                    <option value="Strategic Enterprise West">Strategic Enterprise West</option>
                </select>
            </div>

            <div class="flex items-start space-x-3 p-3 bg-blue-50/50 rounded-lg border border-blue-100">
                <input type="checkbox" id="request-training" class="mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded">
                <label for="request-training" class="text-[11px] text-slate-600 font-medium">
                    I'm interested in having Snowflake contact me to set up a training session for my sales team.
                </label>
            </div>

            <button type="submit" id="submit-btn" class="st-btn w-full py-4 rounded-xl font-bold shadow-lg">ENTER RAFFLE</button>
        </form>
    </div>

    <!-- TICKET / THANK YOU -->
    <div id="ticket-screen" class="w-full max-w-md st-card p-10 hidden text-center space-y-6">
        <div class="bg-slate-50 border-2 border-dashed border-slate-200 p-8 rounded-2xl relative">
            <span class="absolute -top-3 left-1/2 -translate-x-1/2 bg-white px-3 text-[10px] font-bold text-slate-400 uppercase">Entry Confirmed</span>
            <div id="ticket-id" class="text-4xl font-black text-slate-800 my-2">WIN-XXXX</div>
        </div>

        <div class="text-left space-y-4 px-2">
            <p class="text-sm font-semibold text-slate-800">Thanks for stopping by the Snowflake booth!</p>
            <p class="text-[11px] text-slate-600 leading-relaxed">Here are your contacts who attended CDW's SKO:</p>
            
            <div class="grid grid-cols-1 gap-4 pt-1">
                <div class="bg-slate-50 p-3 rounded-lg border-l-4 border-blue-400">
                    <p class="text-[12px] font-extrabold text-slate-800">Jessica Black</p>
                    <p class="text-[10px] text-slate-500 font-medium italic">"Public Sector" Partner Manager</p>
                    <a href="mailto:jessica.black@snowflake.com" class="text-[11px] text-blue-600 font-semibold underline block mt-1">jessica.black@snowflake.com</a>
                </div>
                
                <div class="bg-slate-50 p-3 rounded-lg border-l-4 border-blue-400">
                    <p class="text-[12px] font-extrabold text-slate-800">Justin Levenbrook</p>
                    <p class="text-[10px] text-slate-500 font-medium italic">"Private Sector" Partner Manager</p>
                    <a href="mailto:justin.levenbrook@snowflake.com" class="text-[11px] text-blue-600 font-semibold underline block mt-1">justin.levenbrook@snowflake.com</a>
                </div>
            </div>
        </div>

        <p class="text-slate-400 text-[10px] px-4 pt-2">Take a screenshot of this ticket for your records!</p>
        <button onclick="location.reload()" class="text-slate-400 hover:text-slate-600 text-xs font-bold uppercase tracking-widest pt-4">Done</button>
    </div>

    <script>
        // --- CONFIGURATION ---
        const scriptURL = "https://script.google.com/macros/s/AKfycbyJnHD5hb8Q-iMs824nDlKJdXJlRd1v8vf_UWVORhf4M0UbiDrHjvv1AfT4dMvIm7D5WA/exec"; 

        // Quiz State
        let currentQ = 0;
        let score = 0;
        const quizData = [
            { 
                q: "Snowflake is a global platform. Which cloud providers can you deploy us on today?", 
                a: ["AWS Only", "AWS and Azure", "AWS, Azure, and Google Cloud (GCP)", "On-premises only"], 
                c: 2 
            },
            { 
                q: "In addition to being 'Easy, Connected and Trusted', what differentiates Snowflake's architecture from our competitors?", 
                a: ["Snowflake requires manual cluster tuning", "Snowflake is a fully managed service with zero maintenance overhead", "Snowflake only supports SQL", "Snowflake relies on third-party governance"], 
                c: 1 
            },
            { 
                q: "How does Snowflake's separate storage and compute benefit your clients' TCO?", 
                a: ["They pay for compute even when idle", "It requires more hardware to function", "They can scale compute instantly and only pay for what they use", "It makes the platform harder to manage"], 
                c: 2 
            },
            { 
                q: "Snowflake meets the most stringent compliance standards. Which certifications allow us to support highly regulated customers including Federal, State and Local, Finserv and Healthcare customers?", 
                a: ["SOC2 Type II only", "FedRAMP High, StateRAMP, and HIPAA/HITRUST", "Standard PCI-DSS", "No specialized government certifications"], 
                c: 1 
            },
            { 
                q: "How does Snowflake's Azure presence help CDW sellers win with customers who have a Microsoft Azure Consumption Commitment (MACC)?", 
                a: ["Snowflake spend on Azure can be applied toward a customer's MACC, driving mutual cloud growth", "Snowflake requires customers to move all data off Azure", "Snowflake only runs in AWS data centers", "Snowflake replaces the need for Azure Active Directory"], 
                c: 0 
            }
        ];

        window.startQuiz = () => {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            renderQ();
        };

        const renderQ = () => {
            const data = quizData[currentQ];
            document.getElementById('progress').innerText = `QUESTION ${currentQ + 1}/5`;
            document.getElementById('question-text').innerText = data.q;
            const optCont = document.getElementById('options');
            optCont.innerHTML = '';
            
            data.a.forEach((opt, i) => {
                const b = document.createElement('button');
                b.className = "w-full p-4 text-left border-2 border-slate-100 rounded-xl font-medium text-slate-700 active:bg-slate-50 transition-all text-sm";
                b.innerText = opt;
                b.onclick = () => checkAnswer(i, b);
                optCont.appendChild(b);
            });
            document.getElementById('next-btn').classList.add('hidden');
        };

        const checkAnswer = (idx, b) => {
            const correct = quizData[currentQ].c;
            const btns = document.getElementById('options').children;
            for(let btn of btns) btn.disabled = true;

            if(idx === correct) {
                b.classList.add('correct');
                score++;
            } else {
                b.classList.add('incorrect');
                btns[correct].classList.add('correct');
            }
            document.getElementById('next-btn').classList.remove('hidden');
        };

        window.nextQuestion = () => {
            currentQ++;
            if(currentQ < quizData.length) renderQ();
            else {
                document.getElementById('quiz-screen').classList.add('hidden');
                document.getElementById('lead-screen').classList.remove('hidden');
                document.getElementById('final-score').innerText = score;
                window.scrollTo(0,0);
            }
        };

        // Lead Submission to Google Sheets
        document.getElementById('lead-form').onsubmit = (e) => {
            e.preventDefault();
            const btn = document.getElementById('submit-btn');
            btn.disabled = true;
            btn.innerText = "Entry Registered!";

            const ticketId = "WIN-" + Math.floor(1000 + Math.random() * 9000);
            const formData = new FormData();
            formData.append('timestamp', new Date().toLocaleString());
            formData.append('name', document.getElementById('name').value);
            formData.append('email', document.getElementById('email').value);
            formData.append('company', 'CDW');
            formData.append('vertical', document.getElementById('vertical').value);
            formData.append('requestTraining', document.getElementById('request-training').checked ? 'Yes' : 'No');
            formData.append('score', score + "/5");
            formData.append('ticketId', ticketId);

            // UI UPDATE: Show thank you screen immediately to avoid the "Blank Page" feel
            document.getElementById('lead-screen').classList.add('hidden');
            document.getElementById('ticket-screen').classList.remove('hidden');
            document.getElementById('ticket-id').innerText = ticketId;
            window.scrollTo(0,0);

            // DATA SYNC: Send to Google Sheets in the background
            fetch(scriptURL, { 
                method: 'POST', 
                body: formData, 
                mode: 'no-cors' 
            }).catch(err => {
                console.warn("Background sync failed, but user confirmed.", err);
            });
        };
    </script>
</body>
</html>
